import{c as re,a as j,f as L,t as gt,s as Be}from"../chunks/pUpZq1fU.js";import{i as Se}from"../chunks/CyzAuc-r.js";import{p as dt,i as F,L as $t,j as ut,aq as oe,k as R,m as Z,s as M,ar as U,t as Ae,V as Ie}from"../chunks/B39EYcLZ.js";import{s as se,r as Ot,p as kt,i as Ne,a as $e,c as Mt,d as Yt}from"../chunks/D52fYbM_.js";import{I as ie,s as Tt,h as ae,a as ce,b as zt,i as Oe,c as Te,r as ze,d as Ht,e as qe,S as fe,f as Pe,g as rt,t as Q,u as Ke,j as st,w as je,k as De,E as Gt,l as tt,m as qt,P as Re,n as le,o as Ze,B as Ct,p as ke}from"../chunks/CLiMtd86.js";function Lt(t,e){dt(e,!0);let n=Ot(e,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M5 12h14"}],["path",{d:"m12 5 7 7-7 7"}]];ie(t,se({name:"arrow-right"},()=>n,{get iconNode(){return r},children:(o,i)=>{var c=re(),s=F(c);Tt(s,()=>e.children??$t),j(o,c)},$$slots:{default:!0}})),ut()}function Me(t,e){dt(e,!0);let n=Ot(e,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];ie(t,se({name:"rotate-ccw"},()=>n,{get iconNode(){return r},children:(o,i)=>{var c=re(),s=F(c);Tt(s,()=>e.children??$t),j(o,c)},$$slots:{default:!0}})),ut()}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pt=BigInt(0),At=BigInt(1);function It(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function de(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Pt:BigInt("0x"+t)}function Ye(t){return de(zt(t))}function ct(t){return ce(t),de(zt(Uint8Array.from(t).reverse()))}function ue(t,e){return ae(t.toString(16).padStart(e*2,"0"))}function Kt(t,e){return ue(t,e).reverse()}function Y(t,e,n){let r;if(typeof e=="string")try{r=ae(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Oe(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const o=r.length;if(typeof n=="number"&&o!==n)throw new Error(t+" of length "+n+" expected, got "+o);return r}const mt=t=>typeof t=="bigint"&&Pt<=t;function He(t,e,n){return mt(t)&&mt(e)&&mt(n)&&e<=t&&t<n}function nt(t,e,n,r){if(!He(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Ge(t){let e;for(e=0;t>Pt;t>>=At,e+=1);return e}const jt=t=>(At<<BigInt(t))-At;function Dt(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(o,i,c){const s=t[o];if(c&&s===void 0)return;const f=typeof s;if(f!==i||s===null)throw new Error(`param "${o}" is invalid: expected ${i}, got ${f}`)}Object.entries(e).forEach(([o,i])=>r(o,i,!1)),Object.entries(n).forEach(([o,i])=>r(o,i,!0))}function Ut(t){const e=new WeakMap;return(n,...r)=>{const o=e.get(n);if(o!==void 0)return o;const i=t(n,...r);return e.set(n,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const P=BigInt(0),q=BigInt(1),W=BigInt(2),Ce=BigInt(3),he=BigInt(4),we=BigInt(5),ye=BigInt(8);function $(t,e){const n=t%e;return n>=P?n:e+n}function D(t,e,n){let r=t;for(;e-- >P;)r*=r,r%=n;return r}function Wt(t,e){if(t===P)throw new Error("invert: expected non-zero number");if(e<=P)throw new Error("invert: expected positive modulus, got "+e);let n=$(t,e),r=e,o=P,i=q;for(;n!==P;){const s=r/n,f=r%n,y=o-i*s;r=n,n=f,o=i,i=y}if(r!==q)throw new Error("invert: does not exist");return $(o,e)}function pe(t,e){const n=(t.ORDER+q)/he,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function Le(t,e){const n=(t.ORDER-we)/ye,r=t.mul(e,W),o=t.pow(r,n),i=t.mul(e,o),c=t.mul(t.mul(i,W),o),s=t.mul(i,t.sub(c,t.ONE));if(!t.eql(t.sqr(s),e))throw new Error("Cannot find square root");return s}function Ue(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-q,n=0;for(;e%W===P;)e/=W,n++;let r=W;const o=ht(t);for(;Xt(o,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return pe;let i=o.pow(r,e);const c=(e+q)/W;return function(f,y){if(f.is0(y))return y;if(Xt(f,y)!==1)throw new Error("Cannot find square root");let a=n,w=f.mul(f.ONE,i),b=f.pow(y,e),u=f.pow(y,c);for(;!f.eql(b,f.ONE);){if(f.is0(b))return f.ZERO;let S=1,p=f.sqr(b);for(;!f.eql(p,f.ONE);)if(S++,p=f.sqr(p),S===a)throw new Error("Cannot find square root");const l=q<<BigInt(a-S-1),h=f.pow(w,l);a=S,w=f.sqr(h),b=f.mul(b,w),u=f.mul(u,h)}return u}}function We(t){return t%he===Ce?pe:t%ye===we?Le:Ue(t)}const Xe=(t,e)=>($(t,e)&q)===q,Je=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Fe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Je.reduce((r,o)=>(r[o]="function",r),e);return Dt(t,n),t}function Ve(t,e,n){if(n<P)throw new Error("invalid exponent, negatives unsupported");if(n===P)return t.ONE;if(n===q)return e;let r=t.ONE,o=e;for(;n>P;)n&q&&(r=t.mul(r,o)),o=t.sqr(o),n>>=q;return r}function ge(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),o=e.reduce((c,s,f)=>t.is0(s)?c:(r[f]=c,t.mul(c,s)),t.ONE),i=t.inv(o);return e.reduceRight((c,s,f)=>t.is0(s)?c:(r[f]=t.mul(c,r[f]),t.mul(c,s)),i),r}function Xt(t,e){const n=(t.ORDER-q)/W,r=t.pow(e,n),o=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),c=t.eql(r,t.neg(t.ONE));if(!o&&!i&&!c)throw new Error("invalid Legendre symbol result");return o?1:i?0:-1}function Qe(t,e){e!==void 0&&Te(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function ht(t,e,n=!1,r={}){if(t<=P)throw new Error("invalid field: expected ORDER > 0, got "+t);let o,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const a=e;a.BITS&&(o=a.BITS),a.sqrt&&(i=a.sqrt),typeof a.isLE=="boolean"&&(n=a.isLE)}else typeof e=="number"&&(o=e),r.sqrt&&(i=r.sqrt);const{nBitLength:c,nByteLength:s}=Qe(t,o);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let f;const y=Object.freeze({ORDER:t,isLE:n,BITS:c,BYTES:s,MASK:jt(c),ZERO:P,ONE:q,create:a=>$(a,t),isValid:a=>{if(typeof a!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof a);return P<=a&&a<t},is0:a=>a===P,isValidNot0:a=>!y.is0(a)&&y.isValid(a),isOdd:a=>(a&q)===q,neg:a=>$(-a,t),eql:(a,w)=>a===w,sqr:a=>$(a*a,t),add:(a,w)=>$(a+w,t),sub:(a,w)=>$(a-w,t),mul:(a,w)=>$(a*w,t),pow:(a,w)=>Ve(y,a,w),div:(a,w)=>$(a*Wt(w,t),t),sqrN:a=>a*a,addN:(a,w)=>a+w,subN:(a,w)=>a-w,mulN:(a,w)=>a*w,inv:a=>Wt(a,t),sqrt:i||(a=>(f||(f=We(t)),f(y,a))),toBytes:a=>n?Kt(a,s):ue(a,s),fromBytes:a=>{if(a.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+a.length);return n?ct(a):Ye(a)},invertBatch:a=>ge(y,a),cmov:(a,w,b)=>b?w:a});return Object.freeze(y)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ft=BigInt(0),Nt=BigInt(1);function bt(t,e){const n=e.negate();return t?n:e}function tn(t,e,n){const r=c=>c.ez,o=ge(t.Fp,n.map(r));return n.map((c,s)=>c.toAffine(o[s])).map(t.fromAffine)}function me(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function xt(t,e){me(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),o=2**t,i=jt(t),c=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:o,shiftBy:c}}function Jt(t,e,n){const{windowSize:r,mask:o,maxNumber:i,shiftBy:c}=n;let s=Number(t&o),f=t>>c;s>r&&(s-=i,f+=Nt);const y=e*r,a=y+Math.abs(s)-1,w=s===0,b=s<0,u=e%2!==0;return{nextN:f,offset:a,isZero:w,isNeg:b,isNegF:u,offsetF:y}}function en(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function nn(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const vt=new WeakMap,be=new WeakMap;function _t(t){return be.get(t)||1}function Ft(t){if(t!==ft)throw new Error("invalid wNAF")}function rn(t,e){return{constTimeNegate:bt,hasPrecomputes(n){return _t(n)!==1},unsafeLadder(n,r,o=t.ZERO){let i=n;for(;r>ft;)r&Nt&&(o=o.add(i)),i=i.double(),r>>=Nt;return o},precomputeWindow(n,r){const{windows:o,windowSize:i}=xt(r,e),c=[];let s=n,f=s;for(let y=0;y<o;y++){f=s,c.push(f);for(let a=1;a<i;a++)f=f.add(s),c.push(f);s=f.double()}return c},wNAF(n,r,o){let i=t.ZERO,c=t.BASE;const s=xt(n,e);for(let f=0;f<s.windows;f++){const{nextN:y,offset:a,isZero:w,isNeg:b,isNegF:u,offsetF:S}=Jt(o,f,s);o=y,w?c=c.add(bt(u,r[S])):i=i.add(bt(b,r[a]))}return Ft(o),{p:i,f:c}},wNAFUnsafe(n,r,o,i=t.ZERO){const c=xt(n,e);for(let s=0;s<c.windows&&o!==ft;s++){const{nextN:f,offset:y,isZero:a,isNeg:w}=Jt(o,s,c);if(o=f,!a){const b=r[y];i=i.add(w?b.negate():b)}}return Ft(o),i},getPrecomputes(n,r,o){let i=vt.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof o=="function"&&(i=o(i)),vt.set(r,i))),i},wNAFCached(n,r,o){const i=_t(n);return this.wNAF(i,this.getPrecomputes(i,n,o),r)},wNAFCachedUnsafe(n,r,o,i){const c=_t(n);return c===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(c,this.getPrecomputes(c,n,o),r,i)},setWindowSize(n,r){me(r,e),be.set(n,r),vt.delete(n)}}}function on(t,e,n,r){en(n,t),nn(r,e);const o=n.length,i=r.length;if(o!==i)throw new Error("arrays of points and scalars must have equal length");const c=t.ZERO,s=Ge(BigInt(o));let f=1;s>12?f=s-3:s>4?f=s-2:s>0&&(f=2);const y=jt(f),a=new Array(Number(y)+1).fill(c),w=Math.floor((e.BITS-1)/f)*f;let b=c;for(let u=w;u>=0;u-=f){a.fill(c);for(let p=0;p<i;p++){const l=r[p],h=Number(l>>BigInt(u)&y);a[h]=a[h].add(n[p])}let S=c;for(let p=a.length-1,l=c;p>0;p--)l=l.add(a[p]),S=S.add(l);if(b=b.add(S),u!==0)for(let p=0;p<f;p++)b=b.double()}return b}function Vt(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Fe(e),e}else return ht(t)}function sn(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const s of["p","n","h"]){const f=e[s];if(!(typeof f=="bigint"&&f>ft))throw new Error(`CURVE.${s} must be positive bigint`)}const r=Vt(e.p,n.Fp),o=Vt(e.n,n.Fn),c=["Gx","Gy","a","d"];for(const s of c)if(!r.isValid(e[s]))throw new Error(`CURVE.${s} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:o}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const k=BigInt(0),z=BigInt(1),Et=BigInt(2),an=BigInt(8),cn={zip215:!0};function fn(t,e,n,r){const o=t.sqr(n),i=t.sqr(r),c=t.add(t.mul(e.a,o),i),s=t.add(t.ONE,t.mul(e.d,t.mul(o,i)));return t.eql(c,s)}function ln(t,e={}){const{Fp:n,Fn:r}=sn("edwards",t,e),{h:o,n:i}=t;Dt(e,{},{uvRatio:"function"});const c=Et<<BigInt(r.BYTES*8)-z,s=p=>n.create(p),f=e.uvRatio||((p,l)=>{try{return{isValid:!0,value:n.sqrt(n.div(p,l))}}catch{return{isValid:!1,value:k}}});if(!fn(n,t,t.Gx,t.Gy))throw new Error("bad curve params: generator point");function y(p,l,h=!1){const x=h?z:k;return nt("coordinate "+p,l,x,c),l}function a(p){if(!(p instanceof u))throw new Error("ExtendedPoint expected")}const w=Ut((p,l)=>{const{ex:h,ey:x,ez:v}=p,_=p.is0();l==null&&(l=_?an:n.inv(v));const d=s(h*l),g=s(x*l),m=s(v*l);if(_)return{x:k,y:z};if(m!==z)throw new Error("invZ was invalid");return{x:d,y:g}}),b=Ut(p=>{const{a:l,d:h}=t;if(p.is0())throw new Error("bad point: ZERO");const{ex:x,ey:v,ez:_,et:d}=p,g=s(x*x),m=s(v*v),B=s(_*_),A=s(B*B),E=s(g*l),I=s(B*s(E+m)),O=s(A+s(h*s(g*m)));if(I!==O)throw new Error("bad point: equation left != right (1)");const N=s(x*v),T=s(_*d);if(N!==T)throw new Error("bad point: equation left != right (2)");return!0});class u{constructor(l,h,x,v){this.ex=y("x",l),this.ey=y("y",h),this.ez=y("z",x,!0),this.et=y("t",v),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(l){if(l instanceof u)throw new Error("extended point not allowed");const{x:h,y:x}=l||{};return y("x",h),y("y",x),new u(h,x,z,s(h*x))}static normalizeZ(l){return tn(u,"ez",l)}static msm(l,h){return on(u,r,l,h)}_setWindowSize(l){this.precompute(l)}precompute(l=8,h=!0){return S.setWindowSize(this,l),h||this.multiply(Et),this}assertValidity(){b(this)}equals(l){a(l);const{ex:h,ey:x,ez:v}=this,{ex:_,ey:d,ez:g}=l,m=s(h*g),B=s(_*v),A=s(x*g),E=s(d*v);return m===B&&A===E}is0(){return this.equals(u.ZERO)}negate(){return new u(s(-this.ex),this.ey,this.ez,s(-this.et))}double(){const{a:l}=t,{ex:h,ey:x,ez:v}=this,_=s(h*h),d=s(x*x),g=s(Et*s(v*v)),m=s(l*_),B=h+x,A=s(s(B*B)-_-d),E=m+d,I=E-g,O=m-d,N=s(A*I),T=s(E*O),K=s(A*O),G=s(I*E);return new u(N,T,G,K)}add(l){a(l);const{a:h,d:x}=t,{ex:v,ey:_,ez:d,et:g}=this,{ex:m,ey:B,ez:A,et:E}=l,I=s(v*m),O=s(_*B),N=s(g*x*E),T=s(d*A),K=s((v+_)*(m+B)-I-O),G=T-N,yt=T+N,pt=s(O-h*I),xe=s(K*G),ve=s(yt*pt),_e=s(K*pt),Ee=s(G*yt);return new u(xe,ve,Ee,_e)}subtract(l){return this.add(l.negate())}multiply(l){const h=l;nt("scalar",h,z,i);const{p:x,f:v}=S.wNAFCached(this,h,u.normalizeZ);return u.normalizeZ([x,v])[0]}multiplyUnsafe(l,h=u.ZERO){const x=l;return nt("scalar",x,k,i),x===k?u.ZERO:this.is0()||x===z?this:S.wNAFCachedUnsafe(this,x,u.normalizeZ,h)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return S.wNAFCachedUnsafe(this,i).is0()}toAffine(l){return w(this,l)}clearCofactor(){return o===z?this:this.multiplyUnsafe(o)}static fromBytes(l,h=!1){return ce(l),this.fromHex(l,h)}static fromHex(l,h=!1){const{d:x,a:v}=t,_=n.BYTES;l=Y("pointHex",l,_),It("zip215",h);const d=l.slice(),g=l[_-1];d[_-1]=g&-129;const m=ct(d),B=h?c:n.ORDER;nt("pointHex.y",m,k,B);const A=s(m*m),E=s(A-z),I=s(x*A-v);let{isValid:O,value:N}=f(E,I);if(!O)throw new Error("Point.fromHex: invalid y coordinate");const T=(N&z)===z,K=(g&128)!==0;if(!h&&N===k&&K)throw new Error("Point.fromHex: x=0 and x_0=1");return K!==T&&(N=s(-N)),u.fromAffine({x:N,y:m})}static fromPrivateScalar(l){return u.BASE.multiply(l)}toBytes(){const{x:l,y:h}=this.toAffine(),x=Kt(h,n.BYTES);return x[x.length-1]|=l&z?128:0,x}toRawBytes(){return this.toBytes()}toHex(){return zt(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}u.BASE=new u(t.Gx,t.Gy,z,s(t.Gx*t.Gy)),u.ZERO=new u(k,z,z,k),u.Fp=n,u.Fn=r;const S=rn(u,r.BYTES*8);return u}function dn(t,e){Dt(e,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n,hash:r}=e,{BASE:o,Fp:i,Fn:c}=t,s=c.ORDER,f=e.randomBytes||ze,y=e.adjustScalarBytes||(d=>d),a=e.domain||((d,g,m)=>{if(It("phflag",m),g.length||m)throw new Error("Contexts/pre-hash are not supported");return d});function w(d){return c.create(d)}function b(d){return w(ct(d))}function u(d){const g=i.BYTES;d=Y("private key",d,g);const m=Y("hashed private key",r(d),2*g),B=y(m.slice(0,g)),A=m.slice(g,2*g),E=b(B);return{head:B,prefix:A,scalar:E}}function S(d){const{head:g,prefix:m,scalar:B}=u(d),A=o.multiply(B),E=A.toBytes();return{head:g,prefix:m,scalar:B,point:A,pointBytes:E}}function p(d){return S(d).pointBytes}function l(d=Uint8Array.of(),...g){const m=Ht(...g);return b(r(a(m,Y("context",d),!!n)))}function h(d,g,m={}){d=Y("message",d),n&&(d=n(d));const{prefix:B,scalar:A,pointBytes:E}=S(g),I=l(m.context,B,d),O=o.multiply(I).toBytes(),N=l(m.context,O,E,d),T=w(I+N*A);nt("signature.s",T,k,s);const K=i.BYTES,G=Ht(O,Kt(T,K));return Y("result",G,K*2)}const x=cn;function v(d,g,m,B=x){const{context:A,zip215:E}=B,I=i.BYTES;d=Y("signature",d,2*I),g=Y("message",g),m=Y("publicKey",m,I),E!==void 0&&It("zip215",E),n&&(g=n(g));const O=ct(d.slice(I,2*I));let N,T,K;try{N=t.fromHex(m,E),T=t.fromHex(d.slice(0,I),E),K=o.multiplyUnsafe(O)}catch{return!1}if(!E&&N.isSmallOrder())return!1;const G=l(A,T.toBytes(),N.toBytes(),g);return T.add(N.multiplyUnsafe(G)).subtract(K).clearCofactor().is0()}return o.precompute(8),{getPublicKey:p,sign:h,verify:v,utils:{getExtendedPublicKey:S,randomPrivateKey:()=>f(i.BYTES),precompute(d=8,g=t.BASE){return g.precompute(d,!1)}},Point:t}}function un(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=ht(e.n,t.nBitLength,!0),o={Fp:n,Fn:r,uvRatio:t.uvRatio},i={hash:t.hash,randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:o,eddsaOpts:i}}function hn(t,e){return Object.assign({},e,{ExtendedPoint:e.Point,CURVE:t})}function wn(t){const{CURVE:e,curveOpts:n,eddsaOpts:r}=un(t),o=ln(e,n),i=dn(o,r);return hn(t,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const yn=BigInt(1),Qt=BigInt(2);BigInt(3);const pn=BigInt(5),gn=BigInt(8),wt={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:gn,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function mn(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),o=BigInt(80),i=wt.p,s=t*t%i*t%i,f=D(s,Qt,i)*s%i,y=D(f,yn,i)*t%i,a=D(y,pn,i)*y%i,w=D(a,e,i)*a%i,b=D(w,n,i)*w%i,u=D(b,r,i)*b%i,S=D(u,o,i)*u%i,p=D(S,o,i)*u%i,l=D(p,e,i)*a%i;return{pow_p_5_8:D(l,Qt,i)*t%i,b2:s}}function bn(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const te=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function xn(t,e){const n=wt.p,r=$(e*e*e,n),o=$(r*r*e,n),i=mn(t*o).pow_p_5_8;let c=$(t*r*i,n);const s=$(e*c*c,n),f=c,y=$(c*te,n),a=s===t,w=s===$(-t,n),b=s===$(-t*te,n);return a&&(c=f),(w||b)&&(c=y),Xe(c,n)&&(c=$(-c,n)),{isValid:a||w,value:c}}const vn=ht(wt.p,void 0,!0),_n={...wt,Fp:vn,hash:qe,adjustScalarBytes:bn,uvRatio:xn},et=wn(_n);var lt=function(t,e,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},C=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},it,at,X,J;function ee(t){return t!==null&&typeof t=="object"}class H{constructor(e){if(it.set(this,void 0),at.set(this,void 0),e.byteLength!==H.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");lt(this,it,st(e),"f"),lt(this,at,H.derEncode(e),"f")}static from(e){if(typeof e=="string"){const n=rt(e);return this.fromRaw(n)}else if(ee(e)){const n=e;if(ee(n)&&Object.hasOwnProperty.call(n,"__derEncodedPublicKey__"))return this.fromDer(n);if(ArrayBuffer.isView(n)){const r=n;return this.fromRaw(st(r.buffer))}else{if(n instanceof ArrayBuffer)return this.fromRaw(n);if("rawKey"in n)return this.fromRaw(n.rawKey);if("derKey"in n)return this.fromDer(n.derKey);if("toDer"in n)return this.fromDer(n.toDer())}}throw new Error("Cannot construct Ed25519PublicKey from the provided key.")}static fromRaw(e){return new H(e)}static fromDer(e){return new H(this.derDecode(e))}static derEncode(e){const n=je(e,Gt).buffer;return n.__derEncodedPublicKey__=void 0,n}static derDecode(e){const n=De(e,Gt);if(n.length!==this.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");return st(n)}get rawKey(){return C(this,it,"f")}get derKey(){return C(this,at,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}}it=new WeakMap,at=new WeakMap;H.RAW_KEY_LENGTH=32;class V extends fe{constructor(e,n){super(),X.set(this,void 0),J.set(this,void 0),lt(this,X,H.from(e),"f"),lt(this,J,new Uint8Array(n),"f")}static generate(e){if(e&&e.length!==32)throw new Error("Ed25519 Seed needs to be 32 bytes long.");e||(e=et.utils.randomPrivateKey()),Pe(e,new Uint8Array(new Array(32).fill(0)))&&console.warn("Seed is all zeros. This is not a secure seed. Please provide a seed with sufficient entropy if this is a production environment.");const n=new Uint8Array(32);for(let o=0;o<32;o++)n[o]=new Uint8Array(e)[o];const r=et.getPublicKey(n);return V.fromKeyPair(r,n)}static fromParsedJson(e){const[n,r]=e;return new V(H.fromDer(rt(n)),rt(r))}static fromJSON(e){const n=JSON.parse(e);if(Array.isArray(n)){if(typeof n[0]=="string"&&typeof n[1]=="string")return this.fromParsedJson([n[0],n[1]]);throw new Error("Deserialization error: JSON must have at least 2 items.")}throw new Error(`Deserialization error: Invalid JSON type for string: ${JSON.stringify(e)}`)}static fromKeyPair(e,n){return new V(H.fromRaw(e),n)}static fromSecretKey(e){const n=et.getPublicKey(new Uint8Array(e));return V.fromKeyPair(n,e)}toJSON(){return[Q(C(this,X,"f").toDer()),Q(C(this,J,"f"))]}getKeyPair(){return{secretKey:C(this,J,"f"),publicKey:C(this,X,"f")}}getPublicKey(){return C(this,X,"f")}async sign(e){const n=new Uint8Array(e),r=Ke(et.sign(n,C(this,J,"f").slice(0,32)));return Object.defineProperty(r,"__signature__",{enumerable:!1,value:void 0}),r}static verify(e,n,r){const[o,i,c]=[e,n,r].map(s=>(typeof s=="string"&&(s=rt(s)),s instanceof Uint8Array&&(s=st(s.buffer)),new Uint8Array(s)));return et.verify(o,i,c)}}X=new WeakMap,J=new WeakMap;var En=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Bn=new TextEncoder().encode("ic-request-auth-delegation"),Sn=new TextEncoder().encode(`
ic-request`);function Bt(t){if(typeof t!="string"||t.length<64)throw new Error("Invalid public key.");return rt(t)}class Rt{constructor(e,n,r){this.pubkey=e,this.expiration=n,this.targets=r}toCBOR(){return tt.value.map(Object.assign({pubkey:tt.value.bytes(this.pubkey),expiration:tt.value.u64(this.expiration.toString(16),16)},this.targets&&{targets:tt.value.array(this.targets.map(e=>tt.value.bytes(qt(e.toUint8Array()))))}))}toJSON(){return Object.assign({expiration:this.expiration.toString(16),pubkey:Q(this.pubkey)},this.targets&&{targets:this.targets.map(e=>e.toHex())})}}async function An(t,e,n,r){const o=new Rt(e.toDer(),BigInt(+n)*BigInt(1e6),r),i=new Uint8Array([...Bn,...new Uint8Array(le(Object.assign({},o)))]),c=await t.sign(qt(i));return{delegation:o,signature:c}}class Zt{constructor(e,n){this.delegations=e,this.publicKey=n}static async create(e,n,r=new Date(Date.now()+15*60*1e3),o={}){var i,c;const s=await An(e,n,r,o.targets);return new Zt([...((i=o.previous)===null||i===void 0?void 0:i.delegations)||[],s],((c=o.previous)===null||c===void 0?void 0:c.publicKey)||e.getPublicKey().toDer())}static fromJSON(e){const{publicKey:n,delegations:r}=typeof e=="string"?JSON.parse(e):e;if(!Array.isArray(r))throw new Error("Invalid delegations.");const o=r.map(i=>{const{delegation:c,signature:s}=i,{pubkey:f,expiration:y,targets:a}=c;if(a!==void 0&&!Array.isArray(a))throw new Error("Invalid targets.");return{delegation:new Rt(Bt(f),BigInt("0x"+y),a&&a.map(w=>{if(typeof w!="string")throw new Error("Invalid target.");return Re.fromHex(w)})),signature:Bt(s)}});return new this(o,Bt(n))}static fromDelegations(e,n){return new this(e,n)}toJSON(){return{delegations:this.delegations.map(e=>{const{delegation:n,signature:r}=e,{targets:o}=n;return{delegation:Object.assign({expiration:n.expiration.toString(16),pubkey:Q(n.pubkey)},o&&{targets:o.map(i=>i.toHex())}),signature:Q(r)}}),publicKey:Q(this.publicKey)}}}class In extends fe{constructor(e,n){super(),this._inner=e,this._delegation=n}static fromDelegation(e,n){return new this(e,n)}getDelegation(){return this._delegation}getPublicKey(){return{derKey:this._delegation.publicKey,toDer:()=>this._delegation.publicKey}}sign(e){return this._inner.sign(e)}async transformRequest(e){const{body:n}=e,r=En(e,["body"]),o=await le(n);return Object.assign(Object.assign({},r),{body:{content:n,sender_sig:await this.sign(qt(new Uint8Array([...Sn,...new Uint8Array(o)]))),sender_delegation:this._delegation.delegations,sender_pubkey:this._delegation.publicKey}})}}var ne;(function(t){t[t.ECDSA_WITH_SHA256=-7]="ECDSA_WITH_SHA256"})(ne||(ne={}));const Nn=async({url:t,maxTimeToLive:e,allowPinAuthentication:n,derivationOrigin:r,sessionIdentity:o,autoSelectionPrincipal:i})=>{const c=new URL(t);c.hash="#authorize";const s=window.open(c,"ii-window");if(s===null)throw new Error(`Could not open window for '${c}'`);const f=await new Promise(S=>{const p=l=>{l.origin===c.origin&&(window.removeEventListener("message",p),S(l))};window.addEventListener("message",p)});if(f.data.kind!=="authorize-ready")throw new Error("Bad message from II window: "+JSON.stringify(f));const a={kind:"authorize-client",sessionPublicKey:new Uint8Array(o.getPublicKey().toDer()),maxTimeToLive:e,derivationOrigin:r,allowPinAuthentication:n,autoSelectionPrincipal:i};s.postMessage(a,c.origin);const b=(await new Promise(S=>{const p=l=>{l.origin===c.origin&&(window.removeEventListener("message",p),s.close(),S(l))};window.addEventListener("message",p)})).data;if(b.kind!=="authorize-client-success")throw new Error("Bad reply: "+JSON.stringify(b));return{identity:$n({response:b,sessionIdentity:o}),authnMethod:b.authnMethod}},$n=({sessionIdentity:t,response:e})=>{const n=e.delegations.map(On),r=Zt.fromDelegations(n,e.userPublicKey.buffer);return In.fromDelegation(t,r)},On=t=>({delegation:new Rt(t.delegation.pubkey,t.delegation.expiration,t.delegation.targets),signature:t.signature.buffer});let St=oe(void 0),Tn=oe(V.generate());var zn=L("<div><!></div>");function ot(t,e){dt(e,!0);const n=kt(e,"color",3,"surface"),r=kt(e,"size",3,"md"),o=Ot(e,["$$slots","$$events","$$legacy","children","class","color","size"]);var i=zn();Ze(i,()=>({...o,class:["rounded-full border font-medium",{surface:"border-border-tertiary text-text-secondary bg-bg-primary"}[n()],{sm:"px-2 py-0.5 text-xs",md:"px-2 py-0.5 text-sm",lg:"px-2.5 py-1 text-sm"}[r()],e.class]}));var c=R(i);Tt(c,()=>e.children??$t),Z(i),j(t,i),ut()}var qn=L("<span>Try the new sign-in experience</span> <!>",1),Pn=L("<span>Try beta</span> <!>",1),Kn=L(`<div class="flex flex-col gap-6 my-4 items-center flex-1 justify-center py-16"><h1 class="text-text-primary font-medium text-4xl text-center">Internet Identity <span class="text-text-secondary">v2</span></h1> <p class="text-lg text-text-secondary px-8 max-w-160 text-balance text-center mb-2">Experience next-gen decentralized authentication with enhanced features
        that make signing in easier than ever.</p> <div class="flex flex-col gap-2 justify-center items-center"><!> <!></div></div>`),jn=L('<span class="font-bold text-text-primary mr-1">Principal:</span><span> </span>',1),Dn=L("<!> <span>Sign out to try again</span>",1),Rn=L(`<div class="flex flex-col gap-6 my-4 items-center flex-1 justify-center py-16"><!> <h1 class="text-text-primary font-medium text-4xl text-center">You're In. Seamlessly and Securely</h1> <p class="text-lg text-text-secondary px-8 max-w-160 text-balance text-center mb-2">You just signed in with next-gen decentralized authentication for
        faster, safer access without passwords or friction.</p> <!></div>`),Zn=L(`<div class="flex justify-center items-center flex-col flex-1"><!> <div class="flex gap-8 px-8 md:flex-row flex-col max-w-320 mb-16"><div class="flex-1 rounded-xl border border-border-secondary p-4 bg-bg-secondary flex flex-col items-start"><!> <h2 class="text-xl text-text-primary mb-2 font-medium">Discoverable Passkeys</h2> <p class="text-md text-text-secondary">No more remembering identity numbers. Simply select your name from the
        list thanks to discoverable passkeys.</p></div> <div class="flex-1 rounded-xl border border-border-secondary p-4 bg-bg-secondary flex flex-col items-start"><!> <h2 class="text-xl text-text-primary mb-2 font-medium">Multiple Accounts</h2> <p class="text-md text-text-secondary">Use a single identity to create and manage multiple accounts on the same
        dapp, giving you more flexibility and control.</p></div> <div class="flex-1 rounded-xl border border-border-secondary p-4 bg-bg-secondary flex flex-col items-start"><!> <h2 class="text-xl text-text-primary mb-2 font-medium">Sign in with Google</h2> <p class="text-md text-text-secondary">Easily onboard web2 users by securely connecting their Google accounts,
        combining familiar access with the power of decentralized identity.</p></div></div></div>`);function Cn(t,e){dt(e,!1);const[n,r]=$e(),o=()=>Mt(Tn,"$localIdentity",n),i=()=>Mt(St,"$identity",n),c=async v=>{try{const _=await Nn({url:v?"https://beta.id.ai":"https://id.ai",sessionIdentity:o()});console.log(_),Yt(St,_.identity)}catch(_){console.error(_)}},s=()=>{Yt(St,void 0)};Se();var f=Zn(),y=R(f);{var a=v=>{var _=Kn(),d=M(R(_),4),g=R(d);Ct(g,{onclick:()=>c(),size:"xl",class:"transition-all",children:(B,A)=>{var E=qn(),I=M(F(E),2);Lt(I,{size:"1.25rem"}),j(B,E)},$$slots:{default:!0}});var m=M(g,2);ke(m,{onclick:()=>c(!0),class:"text-text-secondary box-border flex items-center justify-center justify-self-start whitespace-nowrap opacity-100 gap-2.5 transition-all hover:underline decoration-1 w-fit text-sm",children:(B,A)=>{var E=Pn(),I=M(F(E),2);Lt(I,{size:"1rem"}),j(B,E)},$$slots:{default:!0}}),Z(d),Z(_),j(v,_)},w=v=>{var _=Rn(),d=R(_);ot(d,{size:"sm",class:"mx-6 px-4 py-2",children:(m,B)=>{var A=jn(),E=M(F(A)),I=R(E,!0);Z(E),Ae(O=>Be(I,O),[()=>i().getPrincipal().toText()],Ie),j(m,A)},$$slots:{default:!0}});var g=M(d,6);Ct(g,{size:"xl",variant:"secondary",onclick:s,children:(m,B)=>{var A=Dn(),E=F(A);Me(E,{size:"1.25rem"}),U(2),j(m,A)},$$slots:{default:!0}}),Z(_),j(v,_)};Ne(y,v=>{i()===void 0?v(a):v(w,!1)})}var b=M(y,2),u=R(b),S=R(u);ot(S,{size:"lg",class:"mb-3",children:(v,_)=>{U();var d=gt("Simplified Access");j(v,d)},$$slots:{default:!0}}),U(4),Z(u);var p=M(u,2),l=R(p);ot(l,{size:"lg",class:"mb-3",children:(v,_)=>{U();var d=gt("Full Control");j(v,d)},$$slots:{default:!0}}),U(4),Z(p);var h=M(p,2),x=R(h);ot(x,{size:"lg",class:"mb-3",children:(v,_)=>{U();var d=gt("Low Friction");j(v,d)},$$slots:{default:!0}}),U(4),Z(h),Z(b),Z(f),j(t,f),ut(),r()}export{Cn as component};
