<html>
  <body>
    <style>
      .postMessage {
        border: black solid thin;
        padding: 1rem;
        margin: 1rem 0;
        overflow-wrap: break-word;
      }
      .postMessage-title {
        font-weight: bold;
      }
      .received {
        background-color: lightblue;
      }
      .sent {
        background-color: lightgreen;
      }
      button {
        margin: 0.5rem;
      }
    </style>
    <div>
      <h1>Identity</h1>
      <h2>Sign In</h2>
      <div>
        <label for="iiUrl" style="display: inline-block; width: 200px"
          >Identity Provider:
        </label>
        <input type="text" id="iiUrl" value="https://identity.ic0.app/" />
      </div>
      <div>
        <label for="maxTimeToLive" style="display: inline-block; width: 200px"
          >Max Time to live (ms):</label
        >
        <input type="number" id="maxTimeToLive" placeholder="(use default)" />
      </div>
      <div>
        <label
          for="derivationOrigin"
          style="display: inline-block; width: 200px"
          >Derivation Origin:</label
        >
        <input type="text" id="derivationOrigin" placeholder="(use default)" />
      </div>
      <button id="signinBtn">Sign In</button>
      <button id="signoutBtn">Sign Out</button>
      <h3>/.well-known/ii-alternative-origins</h3>
      <div id="alternativeOrigins"></div>
      <h3>Principal:</h3>
      <div id="principal"></div>
      <h3>Delegation:</h3>
      <pre id="delegation"></pre>
      <h3>Expiry (ns from now):</h3>
      <div id="expiration"></div>
    </div>

    <div>
      <h1>Contact the IC</h1>
      <label for="hostUrl" style="display: inline-block; width: 120px"
        >Replica URL:
      </label>
      <input type="text" id="hostUrl" value="https://ic0.app/" />
      <br />
      <label for="canisterId" style="display: inline-block; width: 120px"
        >Canister ID:
      </label>
      <input type="text" id="canisterId" />
    </div>
    <div>
      <button id="whoamiBtn">Who Am I?</button>
      <div id="whoamiResponse"></div>
    </div>
    <div>
      <label for="newAlternativeOrigins" style="display: inline-block">
        Set new value for /.well-known/ii-alternative-origins:
      </label>
      <div>
        <input
          type="radio"
          id="certified"
          name="alternativeOriginsMode"
          value="certified"
          checked
        />
        <label for="certified">Certified</label>
      </div>
      <div>
        <input
          type="radio"
          id="uncertified"
          name="alternativeOriginsMode"
          value="uncertified"
        />
        <label for="uncertified">Uncertified</label>
      </div>
      <div>
        <input
          type="radio"
          id="redirect"
          name="alternativeOriginsMode"
          value="redirect"
        />
        <label for="redirect">Redirect</label>
        <input
          type="text"
          id="redirectLocation"
          value="/.well-known/evil-alternative-origins"
          style="width: 400px"
        />
      </div>
      <input type="text" id="newAlternativeOrigins" style="width: 400px" />
      <button id="updateNewAlternativeOrigins">Update Value</button>
    </div>
    <h1>Protocol Tests</h1>
    <div>
      <label for="issuers" style="display: inline-block; width: 200px"
        >Issuers (comma separated):
      </label>
      <input
        type="text"
        id="issuers"
        value="https://nns.ic0.app/"
        style="width: 400px"
      />
      <br />
      <label for="rpPrincipal" style="display: inline-block; width: 200px"
        >Relying Party Principal:
      </label>
      <input type="text" id="rpPrincipal" style="width: 400px" />
    </div>
    <button id="openIiWindowAuthBtn">Open II tab for auth</button>
    <button id="openIiWindowVCBtn">Open II tab for VC flow</button>
    <button id="invalidDataBtn">Send Invalid Data</button>
    <button id="incompleteMessageBtn">Send incomplete message</button>
    <button id="validAuthMessageBtn">Send valid auth message</button>
    <button id="validVcMessageBtn">Send valid VC message</button>
    <button id="closeIIWindowBtn">Close II tab</button>
    <div>
      <label for="customMessage" style="display: inline-block">
        Send custom message:
      </label>
      <input type="text" id="customMessage" style="width: 400px" />
      <button id="customMessageBtn">Send Message</button>
    </div>
    <h3>WindowPostMessages:</h3>
    <div id="messages"></div>

    <script type="module" src="/main.js"></script>
  </body>
</html>
