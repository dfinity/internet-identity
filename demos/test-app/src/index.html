<html>
  <head>
    <script type="module" src="./index.tsx"></script>
  </head>
  <body>
    <style>
      .postMessage {
        border: black solid thin;
        padding: 1rem;
        margin: 1rem 0;
        overflow-wrap: break-word;
      }
      .postMessage-title {
        font-weight: bold;
      }
      .received {
        background-color: lightblue;
      }
      .sent {
        background-color: lightgreen;
      }
    </style>
    <main>
      <section>
        <h1>Identity</h1>
        <h2>Sign In</h2>
        <div>
          <label for="iiUrl" style="display: inline-block; width: 200px"
            >Identity Provider:
          </label>
          <input
            type="text"
            data-role="ii-url"
            id="iiUrl"
            value="http://localhost:5173"
          />
        </div>
        <div>
          <label for="maxTimeToLive" style="display: inline-block; width: 200px"
            >Max Time to live (ms):</label
          >
          <input type="number" id="maxTimeToLive" placeholder="(use default)" />
        </div>
        <div>
          <label
            for="derivationOrigin"
            style="display: inline-block; width: 200px"
            >Derivation Origin:</label
          >
          <input
            type="text"
            id="derivationOrigin"
            placeholder="(use default)"
          />
        </div>
        <div>
          <label
            for="autoSelectionPrincipal"
            style="display: inline-block; width: 200px"
            >Auto-select identity for known principal:</label
          >
          <input type="text" id="autoSelectionPrincipal" placeholder="(none)" />
        </div>
        <div>
          <label
            for="allowPinAuthentication"
            style="display: inline-block; width: 200px"
            >PIN Authentication allowed:</label
          >
          <input type="checkbox" checked id="allowPinAuthentication" />
        </div>
        <button data-action="authenticate" id="signinBtn">Sign In</button>
        <h3>/.well-known/ii-alternative-origins</h3>
        <div id="alternativeOrigins"></div>
        <h3>Principal:</h3>
        <div data-role="principal" id="principal"></div>
        <h3>Authentication Method:</h3>
        <div data-role="authn-method"></div>
        <h3>Delegation:</h3>
        <pre id="delegation"></pre>
        <h3>Expiry (ns from now):</h3>
        <div id="expiration"></div>
      </section>

      <section>
        <h1>Contact the IC</h1>
        <label for="hostUrl" style="display: inline-block; width: 120px"
          >Replica URL:
        </label>
        <input type="text" id="hostUrl" value="https://ic0.app/" />
        <div>
          <button id="whoamiBtn">Who Am I?</button>
          <div id="whoamiResponse"></div>
        </div>
        <div>
          <label for="newAlternativeOrigins" style="display: inline-block">
            Set new value for /.well-known/ii-alternative-origins:
          </label>
          <div>
            <input
              type="radio"
              id="certified"
              name="alternativeOriginsMode"
              value="certified"
              checked
            />
            <label for="certified">Certified</label>
          </div>
          <div>
            <input
              type="radio"
              id="uncertified"
              name="alternativeOriginsMode"
              value="uncertified"
            />
            <label for="uncertified">Uncertified</label>
          </div>
          <div>
            <input
              type="radio"
              id="redirect"
              name="alternativeOriginsMode"
              value="redirect"
            />
            <label for="redirect">Redirect</label>
            <input
              type="text"
              id="redirectLocation"
              value="/.well-known/evil-alternative-origins"
            />
          </div>
          <input type="text" id="newAlternativeOrigins" />
          <button id="updateNewAlternativeOrigins">Update Value</button>
        </div>
      </section>
      <section>
        <h1>Protocol Tests</h1>
        <button id="openIiWindowBtn">Open II tab</button>
        <button id="invalidDataBtn">Send Invalid Data</button>
        <button id="incompleteMessageBtn">Send incomplete message</button>
        <button id="validMessageBtn">Send valid message</button>
        <button id="closeIIWindowBtn">Close II tab</button>
        <div>
          <label for="customMessage" style="display: inline-block">
            Send custom message:
          </label>
          <input type="text" id="customMessage" />
          <button id="customMessageBtn">Send Message</button>
        </div>
        <h3>WindowPostMessages:</h3>
        <div id="messages"></div>
      </section>
      <section id="root-vc-flow"></section>
    </main>
  </body>
</html>
